
# Project Blueprint: Focus Session Timer

## Overview

This document outlines the design, features, and development plan for the "Focus Session Timer," a Flutter application designed to help users stay focused during work or study sessions. The core concept is a gamified timer where a user's focus time nurtures a virtual creature.

## Implemented Features (v1.5.0)

### Core Functionality
- **Customizable Session Timer:** A countdown timer that the user can start, stop, and reset.
- **Circular Time Slider:** A `sleek_circular_slider` allows users to intuitively set their desired focus duration from 0 to 60 minutes.
- **Creature Growth:** A virtual creature that grows and evolves as the user successfully completes focus sessions.
- **Penalty System:** The creature's growth is penalized if the user interrupts a session.
- **State Management:**
    - `TimerProvider`: Manages the timer state (running, stopped, duration).
    - `CreatureProvider`: Manages the creature's state (growth level, particles).
    - `ThemeProvider`: Manages the application's theme (light/dark mode).

### UI & Design
- **Theme:**
    - **Material 3:** Utilizes the latest Material Design principles.
    - **Color Scheme:** Based on a `deepPurple` seed color, generating harmonious light and dark themes.
    - **Typography:** Uses the `Montserrat` font from `google_fonts` for a clean, modern look.
    - **Theming:** Centralized theme data for consistent component styling (`ElevatedButton`, `Card`, `AppBar`) with "glow" effects.
    - **Theme Toggle:** An icon button in the `AppBar` allows users to switch between light and dark modes.
- **Layout:**
    - A single-screen, scrollable interface (`HomeScreen`).
    - A gradient background for visual appeal.
    - A central `Card` element that contains the timer and the creature, creating a focal point with a "lifted" shadow effect.
    - **Responsive Buttons:** The control buttons are in a `Wrap` widget to prevent overflow on smaller screens.
- **Creature Animation:**
    - The creature has a subtle "pulsing" animation using `simple_animations`.
    - Particle effects appear when the creature grows.
- **Accessibility & UX:**
    - **Haptic Feedback:** Buttons provide tactile feedback on press (on supported mobile devices).
    - **Audible Feedback:** Buttons provide audio cues on press using the `audioplayers` package.
    - **Tooltips:** All interactive elements have tooltips for improved accessibility.
    - **Icons:** Buttons have icons to clarify their function.

## Development History & Fixes

### iOS Build Failure (v1.2.2)
- **Problem:** The GitHub Actions workflow was failing during the `flutter build ios` step with an "Application not configured for iOS" error.
- **Root Cause:** The `ios` directory, which is essential for iOS builds, was missing from the project structure.
- **Solution:** The `ios` directory and its necessary configuration files were regenerated by running the `flutter create .` command. This resolved the build error.

### Favicon Caching Issue (v1.4.2)
- **Problem:** The new favicon was not appearing on the live web app, even after clearing the browser cache.
- **Root Cause:** Aggressive caching by the browser and Firebase Hosting's CDN.
- **Solution:** Renamed the favicon file (e.g., from `favicon.png` to `favicon_v2.png`) and updated the `web/index.html` file to reference the new filename. This "cache busting" technique forced the CDN and browser to download the new file.

## Deployment

### Firebase Hosting (v1.3.0, v1.4.1)
- **Project Creation:** A new Firebase project (`focus-session-timer`) was created.
- **Web App:** A web app was added to the Firebase project.
- **Hosting Initialization:** Firebase Hosting was initialized, with the public directory set to `build/web`.
- **Deployment:** The Flutter web app was built for release and deployed to Firebase Hosting.
- **Hosting URL:** The app is now live at: https://focus-session-timer.web.app

## Asset Management

### App Icons (v1.4.0)
- **Package:** Used the `flutter_launcher_icons` package to generate app icons for all platforms (iOS, Android, web, macOS, Windows).
- **Source Image:** A placeholder icon (`assets/images/icon.png`) is used as the source. This can be replaced with a final design in the future.
- **Web Configuration (v1.4.1):** Updated `web/manifest.json` and `web/index.html` to ensure the new icons and favicon are correctly displayed.

### Audio Assets
- **Button Clicks:** The application is configured to play a sound for button interactions. A file named `click.mp3` must be placed in the `assets/audio/` directory for this feature to work.

## Current Plan

- **Implement Session History:**
  - Create a `Session` model to store the data for each focus session (duration, completion status).
  - Create a `HistoryProvider` to manage the list of sessions.
  - Create a `HistoryScreen` to display the session history.
  - Add a button to the `HomeScreen` to navigate to the `HistoryScreen`.
